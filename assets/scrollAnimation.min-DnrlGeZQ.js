import{Q as A,U as Z,V as ee,S as te}from"./index-BlR9IrE_.js";var E={exports:{}},F,Y;function ie(){if(Y)return F;Y=1;var O="Expected a function",y=NaN,j="[object Symbol]",x=/^\s+|\s+$/g,g=/^[-+]0x[0-9a-f]+$/i,B=/^0b[01]+$/i,H=/^0o[0-7]+$/i,V=parseInt,D=typeof A=="object"&&A&&A.Object===Object&&A,L=typeof self=="object"&&self&&self.Object===Object&&self,q=D||L||Function("return this")(),M=Object.prototype,f=M.toString,b=Math.max,a=Math.min,r=function(){return q.Date.now()};function n(i,o,u){var p,h,_,v,c,m,w=0,U=!1,T=!1,N=!0;if(typeof i!="function")throw new TypeError(O);o=S(o)||0,t(u)&&(U=!!u.leading,T="maxWait"in u,_=T?b(S(u.maxWait)||0,o):_,N="trailing"in u?!!u.trailing:N);function R(l){var d=p,P=h;return p=h=void 0,w=l,v=i.apply(P,d),v}function X(l){return w=l,c=setTimeout(I,o),U?R(l):v}function z(l){var d=l-m,P=l-w,G=o-d;return T?a(G,_-P):G}function $(l){var d=l-m,P=l-w;return m===void 0||d>=o||d<0||T&&P>=_}function I(){var l=r();if($(l))return C(l);c=setTimeout(I,z(l))}function C(l){return c=void 0,N&&p?R(l):(p=h=void 0,v)}function J(){c!==void 0&&clearTimeout(c),w=0,p=m=h=c=void 0}function K(){return c===void 0?v:C(r())}function W(){var l=r(),d=$(l);if(p=arguments,h=this,m=l,d){if(c===void 0)return X(m);if(T)return c=setTimeout(I,o),R(m)}return c===void 0&&(c=setTimeout(I,o)),v}return W.cancel=J,W.flush=K,W}function e(i,o,u){var p=!0,h=!0;if(typeof i!="function")throw new TypeError(O);return t(u)&&(p="leading"in u?!!u.leading:p,h="trailing"in u?!!u.trailing:h),n(i,o,{leading:p,maxWait:o,trailing:h})}function t(i){var o=typeof i;return!!i&&(o=="object"||o=="function")}function s(i){return!!i&&typeof i=="object"}function k(i){return typeof i=="symbol"||s(i)&&f.call(i)==j}function S(i){if(typeof i=="number")return i;if(k(i))return y;if(t(i)){var o=typeof i.valueOf=="function"?i.valueOf():i;i=t(o)?o+"":o}if(typeof i!="string")return i===0?i:+i;i=i.replace(x,"");var u=B.test(i);return u||H.test(i)?V(i.slice(2),u?2:8):g.test(i)?y:+i}return F=e,F}var Q;function ne(){return Q||(Q=1,function(O,y){Object.defineProperty(y,"__esModule",{value:!0});var j=function(){function a(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(r,n,e){return n&&a(r.prototype,n),e&&a(r,e),r}}(),x=function(r,n,e){var t=!0;e:for(;t;){var s=r,k=n,S=e;t=!1,s===null&&(s=Function.prototype);var i=Object.getOwnPropertyDescriptor(s,k);if(i===void 0){var o=Object.getPrototypeOf(s);if(o===null)return;r=o,n=k,e=S,t=!0,i=o=void 0;continue e}else{if("value"in i)return i.value;var u=i.get;return u===void 0?void 0:u.call(S)}}};function g(a){return a&&a.__esModule?a:{default:a}}function B(a,r){if(!(a instanceof r))throw new TypeError("Cannot call a class as a function")}function H(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof r);a.prototype=Object.create(r&&r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(a,r):a.__proto__=r)}var V=Z(),D=g(V),L=ie(),q=g(L),M=ee(),f=g(M),b=function(a){H(r,a);function r(n){B(this,r),x(Object.getPrototypeOf(r.prototype),"constructor",this).call(this,n),this.serverSide=typeof window>"u",this.listener=(0,q.default)(this.handleScroll.bind(this),50),this.visibility={onScreen:!1,inViewport:!1},this.state={classes:"animated",style:{animationDuration:this.props.duration+"s",opacity:this.props.initiallyVisible?1:0}}}return j(r,[{key:"getElementTop",value:function(e){for(var t=0;e&&e.offsetTop!==void 0&&e.clientTop!==void 0;)t+=e.offsetTop+e.clientTop,e=e.offsetParent;return t}},{key:"getScrollPos",value:function(){return this.scrollableParent.pageYOffset!==void 0?this.scrollableParent.pageYOffset:this.scrollableParent.scrollTop}},{key:"getScrollableParentHeight",value:function(){return this.scrollableParent.innerHeight!==void 0?this.scrollableParent.innerHeight:this.scrollableParent.clientHeight}},{key:"getViewportTop",value:function(){return this.getScrollPos()+this.props.offset}},{key:"getViewportBottom",value:function(){return this.getScrollPos()+this.getScrollableParentHeight()-this.props.offset}},{key:"isInViewport",value:function(e){return e>=this.getViewportTop()&&e<=this.getViewportBottom()}},{key:"isAboveViewport",value:function(e){return e<this.getViewportTop()}},{key:"isBelowViewport",value:function(e){return e>this.getViewportBottom()}},{key:"inViewport",value:function(e,t){return this.isInViewport(e)||this.isInViewport(t)||this.isAboveViewport(e)&&this.isBelowViewport(t)}},{key:"onScreen",value:function(e,t){return!this.isAboveScreen(t)&&!this.isBelowScreen(e)}},{key:"isAboveScreen",value:function(e){return e<this.getScrollPos()}},{key:"isBelowScreen",value:function(e){return e>this.getScrollPos()+this.getScrollableParentHeight()}},{key:"getVisibility",value:function(){var e=this.getElementTop(this.node)-this.getElementTop(this.scrollableParent),t=e+this.node.clientHeight;return{inViewport:this.inViewport(e,t),onScreen:this.onScreen(e,t)}}},{key:"componentDidMount",value:function(){if(!this.serverSide){var e=this.props.scrollableParentSelector;this.scrollableParent=e?document.querySelector(e):window,this.scrollableParent&&this.scrollableParent.addEventListener?this.scrollableParent.addEventListener("scroll",this.listener):console.warn("Cannot find element by locator: "+this.props.scrollableParentSelector),this.props.animatePreScroll&&this.handleScroll()}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.delayedAnimationTimeout),clearTimeout(this.callbackTimeout),this.listener.cancel(),window&&window.removeEventListener&&window.removeEventListener("scroll",this.listener)}},{key:"visibilityHasChanged",value:function(e,t){return e.inViewport!==t.inViewport||e.onScreen!==t.onScreen}},{key:"animate",value:function(e,t){var s=this;this.delayedAnimationTimeout=setTimeout(function(){s.animating=!0,s.setState({classes:"animated "+e,style:{animationDuration:s.props.duration+"s"}}),s.callbackTimeout=setTimeout(t,s.props.duration*1e3)},this.props.delay)}},{key:"animateIn",value:function(e){var t=this;this.animate(this.props.animateIn,function(){t.props.animateOnce||(t.setState({style:{animationDuration:t.props.duration+"s",opacity:1}}),t.animating=!1);var s=t.getVisibility();e&&e(s)})}},{key:"animateOut",value:function(e){var t=this;this.animate(this.props.animateOut,function(){t.setState({classes:"animated",style:{animationDuration:t.props.duration+"s",opacity:0}});var s=t.getVisibility();s.inViewport&&t.props.animateIn?t.animateIn(t.props.afterAnimatedIn):t.animating=!1,e&&e(s)})}},{key:"handleScroll",value:function(){if(!this.animating){var e=this.getVisibility();this.visibilityHasChanged(this.visibility,e)&&(clearTimeout(this.delayedAnimationTimeout),e.onScreen?e.inViewport&&this.props.animateIn?this.animateIn(this.props.afterAnimatedIn):e.onScreen&&this.visibility.inViewport&&this.props.animateOut&&this.state.style.opacity===1&&this.animateOut(this.props.afterAnimatedOut):this.setState({classes:"animated",style:{animationDuration:this.props.duration+"s",opacity:this.props.initiallyVisible?1:0}}),this.visibility=e)}}},{key:"render",value:function(){var e=this,t=this.props.className?this.props.className+" "+this.state.classes:this.state.classes;return D.default.createElement("div",{ref:function(s){e.node=s},className:t,style:Object.assign({},this.state.style,this.props.style)},this.props.children)}}]),r}(V.Component);y.default=b,b.defaultProps={offset:150,duration:1,initiallyVisible:!1,delay:0,animateOnce:!1,animatePreScroll:!0},b.propTypes={animateIn:f.default.string,animateOut:f.default.string,offset:f.default.number,duration:f.default.number,delay:f.default.number,initiallyVisible:f.default.bool,animateOnce:f.default.bool,style:f.default.object,scrollableParentSelector:f.default.string,className:f.default.string,animatePreScroll:f.default.bool},O.exports=y.default}(E,E.exports)),E.exports}var re=ne();const ae=te(re);export{ae as S};
